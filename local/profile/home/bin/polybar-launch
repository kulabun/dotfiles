#!/usr/bin/env bash

# Terminate already running bar instances
killall -9 polybar

# Wait until the processes have been shut down
while pgrep -u `id -u` -x polybar >/dev/null; do sleep 1; done

export LAPTOP_BATTERY=$(ls -1 /sys/class/power_supply/ | grep "BAT")
export LAPTOP_ADAPTER=$(ls -1 /sys/class/power_supply/ | grep "AC")
export WIFI_INTERFACE=$(ip link | cut -d" " -f2 | tr -d ": " | grep "wlan")
polybar mybar &

echo "Successfully launched"
